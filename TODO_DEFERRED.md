# Deferred Issues

- **sphinx.py**: Verify the Sphinx extension still works with current Sphinx. (Optional deps now declared; functional test still needed.)
- **README badges**: Add badges similar to `unpythonic`/`mcpyrate` (Python version, PyPI, etc.). Also announce Claude-assisted revival after completing the recon plan steps.
- **Tuple unpacking with `Starred`**: `analyze_binding` (analyzer.py:1106–1112) overapproximates when target/value counts don't match — each target gets every RHS value. Could do positional matching for the non-starred targets (e.g. `a, b, *c = x, y, z, foo, bar` → bind `a=x`, `b=y`, `c={z, foo, bar}`). The architecture supports it; `_bind_target` already recurses into `Starred`.
- **`visit_Name` local variable noise**: When a local has no known value, a wildcard `UNKNOWN`-flavored node is created (analyzer.py:721–725). The existing TODO suggests skipping node creation for locals in the innermost scope — would reduce graph noise and postprocessor cleanup work.
- **"Node" terminology overload**: Three concepts share the name "node": (1) AST node (`ast.AST`), (2) Pyan's analysis graph node (`Node` class), (3) visualization/output node. Check whether all three are still conflated and consider introducing distinct terminology to reduce confusion.
- **Async comprehension `is_async` field**: `analyze_comprehension` (analyzer.py:876) ignores `ast.comprehension.is_async`. Would matter if we ever track iterator protocols (`__aiter__`/`__anext__` vs `__iter__`/`__next__`), which we currently don't. May not be worth acting on.
- **Rename `sanitize_exprs`**: It's really `canonize_exprs` — it normalizes AST Tuple/List to Python lists for uniform processing, not sanitizing anything.
- **`Del` context in `visit_Attribute`/`visit_Name`**: Currently silently ignored (falls through the `ast.Load` guard). Could track `__delattr__`/`__del__` protocol calls for completeness, similar to how `__enter__`/`__exit__` are tracked for `with`.
- **Per-comprehension scope isolation**: All listcomps (or setcomps, etc.) in the same function share one scope key (e.g. `"module.func.listcomp"`). This is the same on both pre-3.12 (last symtable child wins) and 3.12+ (synthetic scope shared). Would need numbered keys to isolate each comprehension's bindings.
- **Move `modvis.py` into `pyan/` package**: Currently lives at repo root. Should move into the package when doing N4 (CLI integration). The `sys.path.insert` hack in `tests/test_modvis.py` can be removed at the same time.
- **Unify output format support**: `create_callgraph()` only supports dot/svg/html; `main()` also supports tgf/yed. Both should support all five formats.
